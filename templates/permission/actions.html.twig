{% macro user_permissions(view) %}
    {% import "macros/widgets.html.twig" as widgets %}
    {% set actions = {} %}

    {% if view != 'index' and is_granted('role_permissions') %}
        {% set actions = actions|merge({'permissions': path('admin_user_permissions')}) %}
    {% endif %}

    {% if view != 'role' and is_granted('role_permissions') %}
        {% set actions = actions|merge({'create': {'url': path('admin_user_roles'), 'class': 'modal-ajax-form'}}) %}
    {% endif %}

    {% set actions = actions|merge({'help': {'url': 'permissions.html'|docu_link, 'target': '_blank'}}) %}

    {% set event = trigger('actions.user_permissions', {'actions': actions, 'view': view}) %}
    {{ widgets.page_actions(event.payload.actions) }}
{% endmacro %}
